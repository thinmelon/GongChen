<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta name="page-view-size" content="1280*720">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>文明创建</title>
    <link rel="stylesheet" href="../style/common.css">
    <link rel="stylesheet" href="../style/city.css">
</head>
<body>

<div id="city-logo" style="background: url('../images/city/city_logo.png') no-repeat; "></div>
<div id="city_content">
    <div id="city_left_panel">
        <div id="city_entry">
            <div id="city_building" class="city_entry_item"
                 style="background: url(../images/city/city_building.png) no-repeat; "></div>
            <div id="city_country" class="city_entry_item"
                 style="background: url(../images/city/city_country.png) no-repeat; "></div>
            <div id="city_culture" class="city_entry_item"
                 style="background: url(../images/city/city_culture.png) no-repeat; "></div>
            <div id="city_service" class="city_entry_item"
                 style="background: url(../images/city/city_service.png) no-repeat; "></div>
            <div id="city_manager" class="city_entry_item"
                 style="background: url(../images/city/city_manage.png) no-repeat; "></div>
            <div id="city_activity" class="city_entry_item"
                 style="background: url(../images/city/city_activity.png) no-repeat; "></div>
            <div id="city_volunteer" class="city_entry_long_item"
                 style="background: url(../images/city/city_volunteer.png) no-repeat; "></div>
        </div>
        <div id="city_ad_0">
            <img alt="ad_preview" src="../images/city/city_mid_ad.jpg" width="446px"/>
        </div>
        <div id="city_ad_1">
            <img alt="ad_preview" src="../images/city/city_ad_1.jpg" width="446px" height="111"/>
        </div>
    </div>
    <div id="city_notices_board">
        <div id="affairs_notices_board_bar"
             style="background: url('../images/city/city_list_bar.png'); width: 370px; height: 39px "></div>
        <div id="list_menu_0" class="city_list_item" style="top: 50px;">
            <div class="city_list_item_text"> 粮食局开展“世界粮食日”活动</div>
        </div>
        <div id="list_menu_1" class="city_list_item" style="top: 90px;">
            <div class="city_list_item_text">持续实施“强村行动计划”促城乡均衡发展</div>
        </div>
        <div id="list_menu_2" class="city_list_item" style="top: 130px;">
            <div class="city_list_item_text">实施创新驱动发展九大产业</div>
        </div>
        <div id="list_menu_3" class="city_list_item" style="top: 170px;">
            <div class="city_list_item_text">深山发展万吨农产品加工</div>
        </div>
        <div id="list_menu_4" class="city_list_item" style="top: 210px;">
            <div class="city_list_item_text">农业部门微信扫描验农贸 源头鉴别打击造假</div>
        </div>
        <div id="city-notice-board-more"
             style="background: url(../images/list-item-more.png) no-repeat; width: 126px; height: 18px;"></div>
    </div>
</div>

<!--底部-->
<div id="weather-forecast"></div>
<div id="intro-btn-usage"></div>

<div id="self_ad_focus">
    <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
        <tbody>
        <tr>
            <td width="10" height="10"
                style="background:url(../images/focus_lt.png) no-repeat;"></td>
            <td style="background:url(../images/focus_t.png) repeat-x;"></td>
            <td width="10" style="background:url(../images/focus_rt.png) no-repeat;"></td>
        </tr>
        <tr>
            <td style="background:url(../images/focus_l.png) repeat-y;"></td>
            <td>&nbsp;</td>
            <td style="background:url(../images/focus_r.png) repeat-y;"></td>
        </tr>
        <tr>
            <td width="10" height="10" style="background:url(../images/focus_lb.png) no-repeat;"></td>
            <td style="background:url(../images/focus_b.png) repeat-x;"></td>
            <td style="background:url(../images/focus_rb.png) no-repeat;"></td>
        </tr>
        </tbody>
    </table>
</div><!-- self_ad_focus -->
<div id="debug-message"></div>

</body>

<script type="application/javascript" src="../script/async.js"></script>
<script type="application/javascript" src="../script/utility.js"></script>
<script type="application/javascript" src="../script/keyEvent.js"></script>
<script type="application/javascript">

    var menuObj = {

            focusPosX: 0,                           // 记录光标在区域内的位置
            focusPosY: 0,                           // 记录光标在区域内的所在行
            itemsPerLine: [2, 2, 2, 1],             // 每行所包含的元素数量
            menuPosArray: [
                {left: 70, top: 142, width: 157, height: 116, url: ""},
                {left: 230, top: 142, width: 157, height: 116, url: ""},
                {left: 70, top: 260, width: 157, height: 116, url: ""},
                {left: 230, top: 260, width: 157, height: 116, url: ""},
                {left: 70, top: 378, width: 157, height: 116, url: ""},
                {left: 230, top: 378, width: 157, height: 116, url: ""},
                {left: 70, top: 495, width: 320, height: 116, url: ""}
            ]
            ,


            init: function () {

            }
            ,

            focusOn: function () {

                var _num = 0;

                for (var i = 0; i < this.focusPosY; i++) {
                    _num += this.itemsPerLine[i];
                }

                _num += this.focusPosX;

                $("self_ad_focus").style.left = this.menuPosArray[_num].left + "px";
                $("self_ad_focus").style.top = this.menuPosArray[_num].top + "px";
                $("self_ad_focus").style.width = this.menuPosArray[_num].width + "px";
                $("self_ad_focus").style.height = this.menuPosArray[_num].height + "px";

            }
            ,

            focusOut: function () {
            }
            ,

            moveX: function (_direction) {

                this.focusPosX += _direction;

                if (this.focusPosX >= 0 && this.focusPosX < this.itemsPerLine[this.focusPosY]) {

                    if (this.focusPosX >= this.itemsPerLine[this.focusPosY]) {
                        this.focusPosX = this.itemsPerLine[this.focusPosY] - 1;
                    }

                    this.focusOn();

                } else if (this.focusPosX < 0) {

                    this.focusPosX = 0;

                    controller.focusArea = 2;
                    controller.focusOn();

                } else {

                    this.focusPosX = this.itemsPerLine[this.focusPosY] - 1;

                    controller.focusArea = 1;
                    postObj.focusPos = 0;
                    postObj.focusOn();

                }

                console.info("X => " + this.focusPosX + " Y => " + this.focusPosY);
            }
            ,

            moveY: function (_direction) {

                this.focusPosY += _direction;

                if (this.focusPosY >= 0 && this.focusPosY < this.itemsPerLine.length) {

                    if (this.focusPosX >= this.itemsPerLine[this.focusPosY]) {
                        this.focusPosX = this.itemsPerLine[this.focusPosY] - 1;
                    }

                } else if (this.focusPosY < 0) {

                    this.focusPosY = this.itemsPerLine.length - 1;
                    this.focusPosX = 0;

                } else {

                    this.focusPosY = 0;
                    this.focusPosX = 0;

                }

                this.focusOn();

                console.info("X => " + this.focusPosX + " Y => " + this.focusPosY);

            }
            ,

            doSelect: function () {

                var _num = 0;

                for (var i = 0; i < this.focusPosY; i++) {
                    _num += this.itemsPerLine[i];
                }

                _num += this.focusPosX;

                var link = this.menuPosArray[_num].url;

                if ("" != link) {
                    window.location.href = link;
                }

            }

        },
        postObj = {

            focusPos: 0,                // 记录光标在区域内的位置
            postItemArray: [
                {
                    left: 385,
                    top: 142,
                    width: 451,
                    height: 348,
                    url: "play.html?assetid=FFMZ0000000000009141&backUrl=" + encodeURIComponent(window.location.href)
                },

                {
                    left: 385,
                    top: 494,
                    width: 451,
                    height: 116,
//                url: _link = "more.html?resourceId=" + paramObj.djjyResourceIdArray[0].resourceId
                    url: "monitor.html?rtsp=rtsp://10.184.255.7:554/140801121006552&backUrl=" + encodeURIComponent(window.location.href)
                }
            ],

            init: function () {
            },

            focusOn: function () {

                $("self_ad_focus").style.left = this.postItemArray[this.focusPos].left + "px";
                $("self_ad_focus").style.top = this.postItemArray[this.focusPos].top + "px";
                $("self_ad_focus").style.width = this.postItemArray[this.focusPos].width + "px";
                $("self_ad_focus").style.height = this.postItemArray[this.focusPos].height + "px";

            },

            focusOut: function () {

            },

            moveX: function (_direction) {

                if (_direction < 0) {

                    if (this.focusPos == 0) {

                        controller.focusArea = 0;       //  移到菜单区域
                        menuObj.focusPosY = 0;          //  光标定位至首行
                        menuObj.focusPosX = menuObj.itemsPerLine[menuObj.focusPosY] - 1;
                        menuObj.focusOn();

                    } else {

                        controller.focusArea = 0;       //  移到菜单区域
                        menuObj.focusPosY = menuObj.itemsPerLine.length - 1;          //  光标定位至末行
                        menuObj.focusPosX = menuObj.itemsPerLine[menuObj.focusPosY] - 1;
                        menuObj.focusOn();

                    }

                } else {

                    controller.focusArea = 2;           // 移到文字列表区域
                    listObj.focusOn();

                }


            },

            moveY: function (_direction) {

                this.focusPos += _direction;

                if (this.focusPos >= 0 && this.focusPos < this.postItemArray.length) {

                } else if (this.focusPos < 0) {

                    this.focusPos = this.postItemArray.length - 1;

                } else {

                    this.focusPos = 0;

                }

                this.focusOn();

            },

            doSelect: function () {

                var link = this.postItemArray[this.focusPos].url;

                if ("" != link) {
                    window.location.href = link;
                }

            }
        },
        listObj = {

            focusPos: 0,                        // 记录光标在区域内的位置
            listItemNum: 6,                     // 列表元素的显示数量
            listItemArray: [
                {left: 849, top: 200, width: 360, height: 30},
                {left: 849, top: 240, width: 360, height: 30},
                {left: 849, top: 280, width: 360, height: 30},
                {left: 849, top: 320, width: 360, height: 30},
                {left: 849, top: 360, width: 360, height: 30},
                {left: 1049, top: 560, width: 133, height: 30}
            ],
            listItemTitleArray: [],

            init: function () {

                this.addListItem("111", '粮食局开展“世界粮食日”活动', 1, 111);
                this.addListItem("111", '持续实施“强村行动计划”促城乡均衡发展', 1, 111);
                this.addListItem("111", '实施创新驱动发展九大产业', 1, 111);
                this.addListItem("111", '深山发展万吨农产品加工', 1, 111);
                this.addListItem("111", '农业部门微信扫描验农贸 源头鉴别打击造假', 1, 111);

                this.addListItem(0, ">>更多信息", 0, 0);

//            if (arrayNum > listObj.listItemNum) {
//                listObj.addListItem(0, ">>更多信息", 0, 0);
//            }

//            this.setListItemTitle();

//            listObj.addListItem(0, ">>更多信息", 0, 0);
//            this.setListItemTitle();

            },

            setListItemTitle: function () {

                for (var i = 0; i < listObj.listItemTitleArray.length; i++) {

                    $("list_menu_" + i).children[0].innerHTML = listObj.listItemTitleArray[i].title;
                    $("list_menu_" + i).children[0].style.color = "#000000";

                }

            },

            addListItem: function (_assetID, _title, _flag, _id) {

                if (this.listItemTitleArray.length >= this.listItemNum) {

                    this.listItemTitleArray.pop();

                }

                this.listItemTitleArray.push({assetID: _assetID, title: _title, flag: _flag, id: _id});

            },

            removeAllListItem: function () {

                while (this.listItemTitleArray.length > 0) {

                    this.listItemTitleArray.pop();

                }

            },

            focusOn: function () {

                $("self_ad_focus").style.left = this.listItemArray[this.focusPos].left + "px";
                $("self_ad_focus").style.top = this.listItemArray[this.focusPos].top - 5 + "px";
                $("self_ad_focus").style.width = this.listItemArray[this.focusPos].width + "px";
                $("self_ad_focus").style.height = this.listItemArray[this.focusPos].height + "px";

                var _focusListItem = document.getElementById("list_menu_" + this.focusPos);
                if (null != _focusListItem) {
                    showTitleForMarquee(this.listItemTitleArray[this.focusPos].title, _focusListItem.children[0], 12);
                }
//            showTitleForMarquee(this.listItemTitleArray[this.focusPos].title, $("list_menu_" + this.focusPos).children[0], 20);
//            $("list_menu_" + this.focusPos).children[0].style.color = "#00F";

            },

            focusOut: function () {

                var _focusListItem = document.getElementById("list_menu_" + this.focusPos);
                if (null != _focusListItem) {
                    _focusListItem.children[0].innerHTML = this.listItemTitleArray[this.focusPos].title;
                }
//            $("list_menu_" + this.focusPos).children[0].innerHTML = this.listItemTitleArray[this.focusPos].title;
//            $("list_menu_" + this.focusPos).children[0].style.color = "#000000";

            },

            moveX: function (_direction) {

                this.focusOut();

                if (_direction < 0) {

                    controller.focusArea = 1;   // 移到海报区域

                    postObj.focusPos = 0;
                    postObj.focusOn();

                } else {

                    controller.focusArea = 0;   // 移到菜单区域

                    menuObj.focusPosX = 0;
                    menuObj.focusPosY = 0;
                    menuObj.focusOn();

                }

            },

            moveY: function (_direction) {

                this.focusOut();

                this.focusPos += _direction;

                if (this.focusPos >= 0 && this.focusPos < this.listItemTitleArray.length) {


                } else if (this.focusPos < 0) {

                    this.focusPos = this.listItemTitleArray.length - 1;


                } else {

                    this.focusPos = 0;

                }

                this.focusOn();

            },

            doSelect: function () {

                var _link = "";

                if (this.listItemTitleArray[this.focusPos].flag == 1) {     // 文字列表项

                    _link = "play.html?assetid=" + this.listItemTitleArray[this.focusPos].assetID + "&backUrl=" + encodeURIComponent(window.location.href);

                    console.info("listObj   ==>     doSelect    ==> URL = " + _link);

                    window.location.href = _link;
                } else {                                                    // 更多内容

                    _link = "more.html?resourceId=" + paramObj.djjyResourceIdArray[0].resourceId;

                    window.location.href = _link;

                }
            }

        },
        controller = {

            focusArea: 0,

            init: function () {

                console.info("controller ==> init");
                transferStation.record();
                listObj.init();
                $("self_ad_focus").style.visibility = "visible";
                this.focusOn();
            },

            focusOn: function () {

                switch (this.focusArea) {
                    case 0:             // 菜单
                        menuObj.focusOn();
                        break;
                    case 1:             // 海报
                        postObj.focusOn();
                        break;
                    case 2:             // 文字列表
                        listObj.focusOn();
                        break;
                    default:
                        break;
                }

            },

            focusOut: function () {

            },

            moveX: function (_direction) {

                switch (this.focusArea) {
                    case 0:             // 菜单

                        menuObj.moveX(_direction);

                        break;
                    case 1:             // 海报


                        postObj.moveX(_direction);

                        break;
                    case 2:             // 文字列表

                        listObj.moveX(_direction);

                        break;
                    default:
                        break;
                }

            },

            moveY: function (_direction) {

                switch (this.focusArea) {
                    case 0:             // 菜单

                        menuObj.moveY(_direction);

                        break;
                    case 1:             // 海报

                        postObj.moveY(_direction);

                        break;
                    case 2:             // 文字列表

                        listObj.moveY(_direction);

                        break;
                    default:
                        break;
                }

            },

            changePage: function (_direction) {

            },

            doSelect: function () {

            },

            doBack: function () {

                var _url = "index.html?focusArea=" + transferStation.idxFocusArea + "&focusPos=" + transferStation.idxFocusPos + "&focusItemName=" + transferStation.idxFocusName;

                window.location.href = _url;

            }
        };

    function grabEvent(_event) {

        var code = Event(_event);

        switch (code) {
            case "KEY_UP": //
                controller.moveY(-1);
                return false;
            case "KEY_DOWN": //
                controller.moveY(1);
                return false;
            case "KEY_LEFT": //
                controller.moveX(-1);
                return false;
            case "KEY_RIGHT": //
                controller.moveX(1);
                return false;
            case "KEY_PAGE_UP": //
                controller.changePage(-1);
                return false;
            case "KEY_PAGE_DOWN": //
                controller.changePage(1);
                return false;
            case "KEY_SELECT": //
                controller.doSelect();
                return false;
            case "KEY_EXIT":
            case "KEY_BACK":
                controller.doBack();
                return false;
            default:
                break;
        }
    }
    document.onkeydown = grabEvent;
    window.onload = controller.init();

</script>

</html>